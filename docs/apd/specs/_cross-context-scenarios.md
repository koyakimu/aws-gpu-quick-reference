---
title: コンテキスト間データフロー
status: draft
created: 2026-02-11
---

# コンテキスト間データフロー

## データフロー図

```
GPU_DATA (共有データソース)
  │
  ├──→ [REF] GPUリファレンステーブル
  │       │
  │       └──→ [UI] ビジュアルデザイン（テーブルのスタイル適用）
  │
  ├──→ [CAL] コスト計算ツール（インスタンス選択肢・価格参照）
  │
  └──→ [I18N] 多言語対応（カラム名・ラベルの翻訳）
            │
            ├──→ [REF] テーブルヘッダー・世代ラベルの翻訳
            ├──→ [CAL] 計算ツールのラベル・メッセージの翻訳
            └──→ [UI] 言語切替UIの配置
```

## シナリオ

### S-1: 言語切替時のテーブル再描画

```
Given: テーブルとコスト計算ツールが表示されている
When: ユーザーが言語を切り替える
Then: I18Nコンテキストが翻訳辞書を切り替える
And: REFコンテキストのテーブルヘッダーが更新される
And: CALコンテキストのラベル・メッセージが更新される
And: データ値（数値・インスタンス名）は変更されない
```

### S-2: コスト計算ツールからのインスタンス参照

```
Given: コスト計算ツールが表示されている
When: ユーザーがインスタンスを選択する
Then: CALコンテキストがGPU_DATAから該当インスタンスの価格を取得する
And: 選択されたインスタンスのOn-Demand/CB価格で計算する
```

### S-3: 新インスタンス追加時の影響

```
Given: GPU_DATAに新しいインスタンスが追加される
When: ページが読み込まれる
Then: REFテーブルに新しい行が表示される
And: CALのインスタンス選択肢に新インスタンスが追加される
And: I18Nの翻訳対象外（インスタンス名は英語のまま）
```
